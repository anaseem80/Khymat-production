import{v as C,w as u,B as h,x as p,D as d,aa as S,b as k,d as y}from"./entry.3WBB32f8.js";var b={exports:{}};(function(i,n){(function(){var a={expires:"1d",path:"; path=/",domain:"",secure:"",sameSite:"; SameSite=Lax"},l={install:function(t,e){e&&this.config(e.expires,e.path,e.domain,e.secure,e.sameSite),t.prototype&&(t.prototype.$cookies=this),t.config&&t.config.globalProperties&&(t.config.globalProperties.$cookies=this,t.provide("$cookies",this)),t.$cookies=this},config:function(t,e,o,f,c){a.expires=t||"1d",a.path=e?"; path="+e:"; path=/",a.domain=o?"; domain="+o:"",a.secure=f?"; Secure":"",a.sameSite=c?"; SameSite="+c:"; SameSite=Lax"},get:function(t){var e=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;if(e&&(e.substring(0,1)==="{"&&e.substring(e.length-1,e.length)==="}"||e.substring(0,1)==="["&&e.substring(e.length-1,e.length)==="]"))try{e=JSON.parse(e)}catch{return e}return e},set:function(t,e,o,f,c,g,m){if(t){if(/^(?:expires|max\-age|path|domain|secure|SameSite)$/i.test(t))throw new Error('Cookie name illegality. Cannot be set to ["expires","max-age","path","domain","secure","SameSite"]	 current key name: '+t)}else throw new Error("Cookie name is not found in the first argument.");e&&typeof e=="object"&&(e=JSON.stringify(e));var s="";if(o=o??a.expires,o&&o!=0)switch(o.constructor){case Number:o===1/0||o===-1?s="; expires=Fri, 31 Dec 9999 23:59:59 GMT":s="; max-age="+o;break;case String:if(/^(?:\d+(y|m|d|h|min|s))$/i.test(o)){var r=o.replace(/^(\d+)(?:y|m|d|h|min|s)$/i,"$1");switch(o.replace(/^(?:\d+)(y|m|d|h|min|s)$/i,"$1").toLowerCase()){case"m":s="; max-age="+ +r*2592e3;break;case"d":s="; max-age="+ +r*86400;break;case"h":s="; max-age="+ +r*3600;break;case"min":s="; max-age="+ +r*60;break;case"s":s="; max-age="+r;break;case"y":s="; max-age="+ +r*31104e3;break}}else s="; expires="+o;break;case Date:s="; expires="+o.toUTCString();break}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+s+(c?"; domain="+c:a.domain)+(f?"; path="+f:a.path)+(g==null?a.secure:g?"; Secure":"")+(m==null?a.sameSite:m?"; SameSite="+m:""),this},remove:function(t,e,o){return!t||!this.isKey(t)?!1:(document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:a.domain)+(e?"; path="+e:a.path)+"; SameSite=Lax",!0)},isKey:function(t){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){if(!document.cookie)return[];for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=0;e<t.length;e++)t[e]=decodeURIComponent(t[e]);return t}};i.exports=l,typeof window<"u"&&(window.$cookies=l)})()})(b);const v=C({id:"LoginStore",state:()=>({loading:!1,social_loading:!1,error:!1,data:null}),actions:{async LOGIN(i){this.loading=!0,u.post(h+"/login",i,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(n=>{if(n.data.token){this.loading=!1;const a=p("token");a.value=n.data.token,d.success("تم التسجيل بنجاح"),S("/"),k().GET_CART_DATA()}}).catch(n=>{if(this.loading=!1,n.response.data.message==="Email not verified."||n.response.data.message==="البريد الإلكتروني لم يتم التحقق منه."){d.error("لم يتم تفعيل الإيميل");const a=y();a.Verfiy_Modal(),a.reset_verify="verify",a.swiper.slideTo(1),a.email=i.email}else d.error(n.response.data.message)})},async SOCIAL_LOGIN(i){this.social_loading=!0,console.log(i),u.post(h+"/social/register",i,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(n=>{if(n.data.token){this.social_loading=!1;const a=p("token");a.value=n.data.token,d.success("تم التسجيل بنجاح"),S("/"),k().GET_CART_DATA()}}).catch(n=>{d.error(n.response.data.message),this.social_loading=!1})}}});export{v as u};
