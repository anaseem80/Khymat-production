import{A as C,B as u,C as p,g as h,D as l,a5 as S,c as k,e as y}from"./entry.22L8YX7W.js";var $={exports:{}};(function(i,r){(function(){var t={expires:"1d",path:"; path=/",domain:"",secure:"",sameSite:"; SameSite=Lax"},n={install:function(o,e){e&&this.config(e.expires,e.path,e.domain,e.secure,e.sameSite),o.prototype&&(o.prototype.$cookies=this),o.config&&o.config.globalProperties&&(o.config.globalProperties.$cookies=this,o.provide("$cookies",this)),o.$cookies=this},config:function(o,e,a,g,d){t.expires=o||"1d",t.path=e?"; path="+e:"; path=/",t.domain=a?"; domain="+a:"",t.secure=g?"; Secure":"",t.sameSite=d?"; SameSite="+d:"; SameSite=Lax"},get:function(o){var e=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(o).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;if(e&&(e.substring(0,1)==="{"&&e.substring(e.length-1,e.length)==="}"||e.substring(0,1)==="["&&e.substring(e.length-1,e.length)==="]"))try{e=JSON.parse(e)}catch{return e}return e},set:function(o,e,a,g,d,f,m){if(o){if(/^(?:expires|max\-age|path|domain|secure|SameSite)$/i.test(o))throw new Error('Cookie name illegality. Cannot be set to ["expires","max-age","path","domain","secure","SameSite"]	 current key name: '+o)}else throw new Error("Cookie name is not found in the first argument.");e&&typeof e=="object"&&(e=JSON.stringify(e));var s="";if(a=a??t.expires,a&&a!=0)switch(a.constructor){case Number:a===1/0||a===-1?s="; expires=Fri, 31 Dec 9999 23:59:59 GMT":s="; max-age="+a;break;case String:if(/^(?:\d+(y|m|d|h|min|s))$/i.test(a)){var c=a.replace(/^(\d+)(?:y|m|d|h|min|s)$/i,"$1");switch(a.replace(/^(?:\d+)(y|m|d|h|min|s)$/i,"$1").toLowerCase()){case"m":s="; max-age="+ +c*2592e3;break;case"d":s="; max-age="+ +c*86400;break;case"h":s="; max-age="+ +c*3600;break;case"min":s="; max-age="+ +c*60;break;case"s":s="; max-age="+c;break;case"y":s="; max-age="+ +c*31104e3;break}}else s="; expires="+a;break;case Date:s="; expires="+a.toUTCString();break}return document.cookie=encodeURIComponent(o)+"="+encodeURIComponent(e)+s+(d?"; domain="+d:t.domain)+(g?"; path="+g:t.path)+(f==null?t.secure:f?"; Secure":"")+(m==null?t.sameSite:m?"; SameSite="+m:""),this},remove:function(o,e,a){return!o||!this.isKey(o)?!1:(document.cookie=encodeURIComponent(o)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(a?"; domain="+a:t.domain)+(e?"; path="+e:t.path)+"; SameSite=Lax",!0)},isKey:function(o){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(o).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){if(!document.cookie)return[];for(var o=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=0;e<o.length;e++)o[e]=decodeURIComponent(o[e]);return o}};i.exports=n,typeof window<"u"&&(window.$cookies=n)})()})($);const w=C({id:"LoginStore",state:()=>({loading:!1,social_loading:!1,error:!1,data:null}),actions:{async LOGIN(i,r){this.loading=!0,u.post(p+"/login",i,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(t=>{if(t.data.token){this.loading=!1;const n=h("token");n.value=t.data.token,l.success(r=="ar"?"تم التسجيل بنجاح":"Logged in successfully"),S(`/${r}`),k().GET_CART_DATA(r),setTimeout(()=>{window.location.reload()},500)}}).catch(t=>{if(this.loading=!1,console.log(t.response.data.message),t.response.data.message==="Email not verified."||t.response.data.message==="البريد الإلكتروني لم يتم التحقق منه."){l.error("لم يتم تفعيل الإيميل");const n=y();n.Verfiy_Modal(),n.reset_verify="verify",n.swiper.slideTo(2),n.email=i.email}else l.error(t.response.data.message)})},async SOCIAL_LOGIN(i,r){this.social_loading=!0,console.log(i),u.post(p+"/social/register",i,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(t=>{if(t.data.token){this.social_loading=!1;const n=h("token");n.value=t.data.token,l.success("تم التسجيل بنجاح"),S("/"),k().GET_CART_DATA(r)}}).catch(t=>{l.error(t.response.data.message),this.social_loading=!1})}}});export{w as u};
