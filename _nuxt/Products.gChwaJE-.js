import{a3 as n,a4 as d,a5 as o,n as h,a as l}from"./entry.c00z_NC_.js";const _=n({id:"myProductsStore",state:()=>({data:null,category_products:null,loading_products:!0,loading_search_prdoucts:null,for_you_products:[],categories:[],search_products:[],filterData:null,brands:[],tags:[],price:[0,1e4]}),actions:{async GET_FILTERD_DATA(){await d.get(o+"/filtter/data").then(t=>{t.data.status_code==200&&(this.filterData=t.data)}).catch(t=>{})},async FILTER_PRODUCTS(t,s,a,e,i,r=null,u){this.loading_products=!0,await d.get(o+`/products/filtterAdvaced?lang=${u}&min_price=${t}&max_price=${s}${i.length!=0?`&brand_ids[]=${i}`:""}${a.length!=0?`&category_ids.0[]=${a}`:""}${e.length!=0?`&tag_ids[]=${e}`:""}&${r!=null?`&sub_category_id=${r}`:""}`).then(c=>{c.data.status_code==200&&(this.loading_products=!1,this.data=c.data.products)}).catch(c=>{this.loading_products=!1})},onCategoryChange(t,s,a,e){const i=this.categories.find(r=>r==t);i||this.categories.push(t),i&&this.categories.splice(this.categories.indexOf(i),1),this.FILTER_PRODUCTS(this.price[0],this.price[1],this.categories,this.tags,this.brands,a,e)},onBrandsChange(t,s,a,e){const i=this.brands.find(r=>r==t);i||this.brands.push(t),i&&this.brands.splice(this.brands.indexOf(i),1),this.FILTER_PRODUCTS(this.price[0],this.price[1],this.categories,this.tags,this.brands,a,e)},onTagChange(t,s,a,e){const i=this.tags.find(r=>r==t);i||(this.tags.push(t),s.classList.add("selected")),i&&(this.tags.splice(this.tags.indexOf(i),1),s.classList.remove("selected")),this.FILTER_PRODUCTS(this.price[0],this.price[1],this.categories,this.tags,this.brands,a,e)},AfterSliderChange(t,s,a){this.FILTER_PRODUCTS(s[0],s[1],this.categories,this.tags,this.brands,t,a)},async GET_SUB_PRODUCTS(t,s=null,a,e){let i;s!==null?i=`subcategories/${s}/products`:i="products/allitems",this.loading_products=!0,await d.get(o+`/${i}?lang=${e}&page=${a}${t!="subcategory"?`&key=${t}`:""}`).then(r=>{r.data.status_code==200&&(this.loading_products=!1,this.data=r.data.products)}).catch(r=>{this.loading_products=!1,r.response.data.errors.subCategoryId&&h("/error")})},async GET_PRODUCTS_BY_CATEGORY_ID(t=null,s,a){let e=`categories/${t}/products`;this.loading_products=!0,await d.get(o+`/${e}?lang=${a}&page=${s}`).then(i=>{i.data.status_code==200&&(this.loading_products=!1,this.data=i.data.products)}).catch(i=>{this.loading_products=!1,i.response.data.errors.categoryId&&h("/error")})},async GET_PRODUCTS_BY_PRICE(t,s,a){this.loading_products=!0,await d.get(o+`/products/price?lang=${a}&categoryId=${t}&price=${s}`).then(e=>{e.data.status_code==200&&(this.loading_products=!1,this.data=e.data.products)}).catch(e=>{this.loading_products=!1})},async SORT_PRODUCTS(t,s){this.loading_products=!0,await d.get(o+`/sorted-products?sort_type=${t}&sub_category_id=${s}`).then(a=>{a.data.status_code==200&&(this.loading_products=!1,this.data=a.data.products)}).catch(a=>{this.loading_products=!1})},async SEARCH_PRODUCTS(t,s){this.loading_search_prdoucts=!0,await d.post(o+`/search-product?lang=${s}&keyword=${t}`).then(a=>{a.data.status_code==200&&(this.loading_search_prdoucts=!1,this.search_products=a.data.products)}).catch(a=>{this.loading_search_prdoucts=!1})},async GET_FOR_YOU_PRODUCTS(){const{locale:t}=l();this.loading_products=!0,await d.get(o+`/products/allitems?lang=${t.value}&page=1`).then(s=>{s.data.status_code==200&&(this.loading_products=!1,this.for_you_products=s.data.products)}).catch(s=>{this.loading_products=!1})}}});export{_ as u};
