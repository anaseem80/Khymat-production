import{a as B,A as D,B as F,i as G}from"./entry.c00z_NC_.js";import{u as N}from"./Address.92BQUa0_.js";import{u as P}from"./Countries.zqNYgQZb.js";import{c as R,a as m}from"./index.esm.MwXYmq5M.js";import{a as q,E as O,F as C,Q as _,a4 as f,a7 as S,a3 as o,J as r,U as M,a5 as a,a2 as c,I as V,a6 as z,u as g,a8 as U,R as j}from"./swiper-vue.pW2UkmIU.js";const J={key:0,class:"absolute left-2 md:right-2"},K=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"close-modal text-gray-600 hover:text-red-600 w-6 h-6 cursor-pointer"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1),Q=[K],H={class:"flex md:flex-row flex-col md:p-4 gap-8"},W={class:"md:grid md:grid-cols-2 gap-4"},X={class:"form-group"},Y={for:"name",class:"text-lg block"},Z={class:"invalid-feedback"},ee={class:"form-group"},oe={for:"last_name",class:"text-lg block"},se={class:"invalid-feedback"},te={class:"form-group"},ae={for:"email",class:"text-lg block"},ne={class:"invalid-feedback"},le={class:"form-group"},ie={for:"phone",class:"text-lg block"},de={class:"invalid-feedback"},re={class:"grid xl:grid-cols-1 md:col-span-2 gap-4"},ce={class:"form-group"},me={for:"country",class:"text-lg block"},ue={value:"",disabled:""},pe=["value"],_e={class:"invalid-feedback"},ge={class:"grid xl:grid-cols-1 md:col-span-2 gap-4"},he={for:"address_2",class:"text-lg block"},fe={class:"invalid-feedback"},ve=o("div",{id:"map",class:"col-span-2",style:{height:"500px"}},null,-1),be=["disabled"],we={class:"translate-y-[-2px]"},Me={__name:"Insert",props:["modal"],setup(I){const{locale:L}=B(),b=I,w=q(null);let y=!1,h,u=[];y||D(()=>import("https://maps.googleapis.com/maps/api/js?key=AIzaSyDjjZzMmPfqAB8xbfhXhr2yiEaJ8n5EiDg&callback=initMap"),__vite__mapDeps([]),import.meta.url).then(()=>{y=!0,E()}).catch(e=>{console.error("Error importing Google Maps API:",e),alert("Geolocation is not supported by this browser.")});function E(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){const n=e.coords.latitude,t=e.coords.longitude,l=new google.maps.LatLng(n,t),p=document.getElementById("map"),s={center:l,zoom:17,mapTypeId:google.maps.MapTypeId.TERRAIN};h=new google.maps.Map(p,s);const d=new google.maps.Marker({position:l,map:h});u.push(d),k(n,t),google.maps.event.addListener(h,"click",function(v){$(v.latLng)})}):alert("Geolocation is not supported by this browser.")}function $(e){u.length>0&&(u[0].setMap(null),u.pop());const n=new google.maps.Marker({position:e,map:h});u.push(n);const t=e.lat(),l=e.lng();k(t,l)}function k(e,n,t){const l=new google.maps.Geocoder,p=new google.maps.LatLng(e,n);l.geocode({location:p},function(s,d){if(d===google.maps.GeocoderStatus.OK&&s[0]&&s[0].place_id){const v=s[0].place_id;w.value=v,F.warn(s[0].formatted_address)}})}const A=R().shape({name:m().required("الاسم الأول مطلوب"),last_name:m().required("الاسم الأخير مطلوب"),email:m().required("البريد الإلكتروني مطلوب").email("البريد الإلكتروني غير صالح"),phone:m().required("رقم الهاتف مطلوب"),country:m().required("الدولة مطلوبة"),address_2:m().required("العنوان بالتفصيل مطلوب")}),i=N(),x=P();x.GET_COUNTRIES(),O(()=>{const e=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(n):alert("Geolocation is not supported by this browser.")},n=t=>{i.latitudes=t.coords.latitude,i.longitude=t.coords.longitude};e()});const T=async e=>{e.latitudes=i.latitudes.toString(),e.longitude=i.longitude.toString(),e.location_id=w.value,i.STORE_ADDRESS(e)};return(e,n)=>{const t=C("Field"),l=G,p=C("Form");return _(),f("div",{class:c(["rounded-lg",{"bg-white p-3 w-full md:w-8/12 m-auto relative":b.modal}])},[b.modal?(_(),f("span",J,Q)):S("",!0),o("div",H,[r(p,{class:"w-full",onSubmit:T,"validation-schema":g(A)},{default:M(({errors:s})=>[o("div",W,[o("div",X,[o("label",Y,a(e.$t("First name")),1),r(t,{type:"text",id:"name",name:"name",class:c(["rounded border p-3 outline-none w-full mt-4 focus:border-primary",{"is-invalid":s.name}])},null,8,["class"]),o("div",Z,a(s.name),1)]),o("div",ee,[o("label",oe,a(e.$t("Last Name")),1),r(t,{type:"text",id:"last_name",name:"last_name",class:c(["rounded border p-3 outline-none w-full mt-4 focus:border-primary",{"is-invalid":s.last_name}])},null,8,["class"]),o("div",se,a(s.last_name),1)]),o("div",te,[o("label",ae,a(e.$t("Email")),1),r(t,{type:"email",id:"email",name:"email",class:c(["rounded border p-3 outline-none w-full mt-4 focus:border-primary",{"is-invalid":s.email}])},null,8,["class"]),o("div",ne,a(s.email),1)]),o("div",le,[o("label",ie,a(e.$t("Phone")),1),r(t,{type:"tel",id:"phone",name:"phone",class:c(["rounded border p-3 outline-none w-full mt-4 focus:border-primary",{"is-invalid":s.phone}])},null,8,["class"]),o("div",de,a(s.phone),1)]),o("div",re,[o("div",ce,[o("label",me,a(e.$t("Country")),1),r(t,{as:"select",id:"country",name:"country",class:c(["rounded border p-3 outline-none w-full mt-4 focus:border-primary",{"is-invalid":s.country}])},{default:M(()=>[o("option",ue,a(e.$t("Choose Country")),1),(_(!0),f(V,null,z(g(x).countries,d=>(_(),f("option",{value:d.name},a(g(L)=="en"?d.name_en:d.name),9,pe))),256))]),_:2},1032,["class"]),o("div",_e,a(s.country),1)])]),o("div",ge,[o("label",he,a(e.$t("Detailed address")),1),r(t,{as:"textarea",id:"address_2",name:"address_2",class:c(["w-full p-4 pb-[92px] rounded border outline-none focus:border-primary",{"is-invalid":s.address_2}]),placeholder:e.$t("Detailed address")},null,8,["placeholder","class"]),o("div",fe,a(s.address_2),1)]),ve]),o("button",{disabled:g(i).loading_store_address,class:"btn mt-6 w-full"},[o("span",we,[U(a(e.$t("Save Changes"))+" ",1),g(i).loading_store_address?(_(),j(l,{key:0,class:"text-white drop-shadow-lg mr-3"})):S("",!0)])],8,be)]),_:1},8,["validation-schema"])])],2)}}};export{Me as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
